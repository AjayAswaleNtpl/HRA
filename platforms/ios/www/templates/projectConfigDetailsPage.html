<style>
    .col-xs-2 {
    padding: 0 !important;
}
.row {
    margin-right: 0px !important;
    margin-left: 0px !important;
}
label {
    font-weight: normal !important;
}
 .col-xs-4, .col-sm-4 {
    padding: 0 4px !important;
}
input{
}
 .ui-autocomplete.ui-menu.ui-widget.ui-widget-content.ui-corner-all
{
	margin-top:20%;
    height: 100px;
    overflow: auto;
}
</style>

<ion-view>
    <div class="bar bar-footer hide-on-keyboard-open" style="background-color:#000; background-size: 100% 0px;">
        <div class="title" style="height: 20px;">
            <h6 style="font-size: 0.5em;color:#fff;margin-top: 5px;height: 10px;
                margin-bottom: 5px;">Powered by HR Align</h6>
        </div>
    </div>
    <ion-content has-bouncing="false" class="item-divider grayBackColor" style="overflow-y: auto;">
        <div class="custom-header" style="padding-top: 0px;padding-bottom: 0px;">
            <h4 class="subHeaderClass" style="margin: 0px;"> <span class="backIcon">
              <i class="icon ion-ios-arrow-back" ng-click="redirectOnBack()"></i></span>
                <b style="vertical-align: super;"> Project Master </b></h4>

        </div>
		<input type="hidden" name="companyId" value="1"
											id="companyId" 
											class="form-control" />
						
        <div name="projectMasterForm">
			<h4 style="font-size: 18px;">{{selfList.projectName}}({{selfList.projectCode}})-{{selfList.status}}</h4>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Company Name </label><span class="dividerClass">:</span>
                <span class="col-sm-8 col-xs-8" id="companyName">{{selfList.companyName}}</span>

            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Project Name </label><span class="dividerClass">:</span>
				<input class="col-sm-8 col-xs-8 form-control" id="projectName" type="text" 
				 autocomplete="off" maxlength="50" disabled/>
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Project Code </label><span class="dividerClass">:</span>
				<input class="col-sm-6 col-xs-8 form-control" id="projectCode" type="text" 
				ng-model="projectMaster.projectCode" autocomplete="off" maxlength="20" disabled/>
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Visibility </label><span class="dividerClass">:</span>
                <div class="col-sm-8 col-xs-8">
                    <div class="form-group row">

                        <label class="col-sm-4 col-xs-4 col-form-label">
                            <input type="radio" id="visibilityPublic" checked="checked" value="y"/> <span>Public</span>
                        </label>
                        <span class="col-sm-8 col-xs-8"><i>(Anyone can log time spent)</i></span>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-4 col-xs-4 col-form-label">
                            <input type="radio" id="visibilityPrivate" checked="checked" value="n"/> <span>Private</span>
                        </label>
                        <span class="col-sm-8 col-xs-8"><i>(Only project team members can log time spent)</i></span>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Project Type </label><span class="dividerClass">:</span>
                <div class="col-sm-8 col-xs-8">
                    <select required="required" class="form-control" id="projectTypeMasterId">
                        <option value="0" selected="selected">---Select Type----</option>
                        <option >Type1</option>
                        <option>Type2</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4 col-xs-4 col-form-label">Hours Distribution Type </label><span class="dividerClass">:</span>
                <select required="required" class="form-control" id="hrsId" name="hrsId">
                    <option selected="selected" value="-1">---Select---</option>
                    <option>Type1</option>
                    <option>Type2</option>
                </select>
            </div>
            <div class="form-group">
                <label class="col-sm-4 col-xs-4 col-form-label">Budgeted Hours</label><span class="dividerClass">:</span>
				<input class="col-sm-8 col-xs-8 form-control" type="text" id="budgetHours"
				disabled
				autocomplete="off" />

            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Approved Hours</label><span class="dividerClass">:</span>
				<input class="col-sm-8 col-xs-8 form-control" type="text" id="approvHours"
				 autocomplete="off" 
				  disabled/>
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Start Date</label><span class="dividerClass">:</span>
                <div class="col-sm-6 col-xs-6">
					<input class="form-control" type="date" id="startDate" ng-readonly="true" 
					 required disabled/>
                    <div class="col-sm-2 col-xs-2">
                        <i style="padding-left: 3%; font-size: 193%;" class="ion-calendar">&emsp;</i>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">End Date</label><span class="dividerClass">:</span>
                <div class="col-sm-6 col-xs-6">
					<input class="form-control" type="date" id="endDate" ng-readonly="true" 
					required disabled/>
                    <div class="col-sm-2 col-xs-2">
                        <i style="padding-left: 3%; font-size: 193%;" class="ion-calendar">&emsp;</i>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Project Value</label><span class="dividerClass">:</span>
				<input type="text" maxlength="100" id="projectValue" autocomplete="off"
				 
				class="col-sm-8 col-xs-8 form-control" disabled />

            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Client Name</label><span class="dividerClass">:</span>
				<input type="text" name="clientName" id="clientName" 
				
				autocomplete="off" maxlength="99" class="col-sm-8 col-xs-8 form-control" disabled>
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Client Location</label><span class="dividerClass">:</span>
				<input type="text" 
				
				name="clientLocation" id="clientLocation" autocomplete="off" 
				maxlength="99" class="col-sm-8 col-xs-8 form-control" disabled>
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Client Address</label><span class="dividerClass">:</span>
				<input type="text" 
                
                name="clientAddress" id="clientAddress" autocomplete="off"
                 maxlength="499" class="col-sm-8 col-xs-8 form-control" disab>
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Client Phone No</label><span class="dividerClass">:</span>
				<input type="text" 
				ng-model="projectMaster.clientPhoneNo"
				name="clientPhoneNo" id="clientPhoneNo" autocomplete="off" maxlength="12" class="col-sm-8 col-xs-8 form-control">
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Client Pan Card No </label><span class="dividerClass">:</span>
				<input type="text" 
				ng-model="projectMaster.clientPanNo"
				name="clientPanNo" id="clientPanNo" autocomplete="off" maxlength="20" class="col-sm-8 col-xs-8 form-control">
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Client GST No </label><span class="dividerClass">:</span>
				<input type="text" 
				ng-model="projectMaster.clientGstNo"
				name="clientGstNo" id="clientGstNo" autocomplete="off" maxlength="30" class="col-sm-8 col-xs-8 form-control">
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Key Contact Person </label><span class="dividerClass">:</span>
				<input type="text" 
				name="keyContactPersonID" id="keyContactPersonID" 
				placeholder="Search Employee" maxlength="100" class="col-sm-8 col-xs-8 form-control">
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Project Manager</label><span class="dividerClass">:</span>
				<input type="text" 
				name="projectManager" value="" id="projectManager" placeholder="Search Employee" maxlength="100" class="col-sm-8 col-xs-8 form-control" />
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Account Manager</label><span class="dividerClass">:</span>
                <input type="text" name="accountmanager" value="" id="accountmanager" placeholder="Search Employee" maxlength="100" class="col-sm-8 col-xs-8 form-control">
            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Office</label><span class="dividerClass">:</span>
                <div class="col-sm-8 col-xs-8">
                    <div class="form-group row">
                        <a class="dataLinkText" href="javascript:SelectAllList('locationId',doChangeLoc)">
                            <i class="fa fa-check mr-10"></i>Select All</a>
                        </a>
                        <a class="dataLinkText" href="javascript:DeselectAllList('locationId',doChangeLoc)">
                            <i class="fa fa-ban mr-10"></i>Deselect All
                        </a>
                    </div>
                    <div class="form-group row">
						<select required="required" class="form-control" 
						ng-model="selectedValues.office"
						ng-change="doChangeLoc()" multiple="multiple" name="locId" id="locationId">
                            <option >Option1</option>
                            <option>Option2</option>
                    </select>
                    </div>
                </div>

            </div>
            <div class="form-group row">
                <label class="col-sm-4 col-xs-4 col-form-label">Team</label><span class="dividerClass">:</span>
                <div class="col-sm-8 col-xs-8">
                    <div class="form-group row">
                        <a class="infoText"> 
                            Retain previous records?
                        </a>
                        <label>
                            <input type="checkbox"  id="preRecord" name="preRecord" onclick="$(this).val(this.checked ? true : false)"/>
                              <span class="Checkbox_mark"></span>
                        </label>
                    </div>
                    <div class="form-group row">
						<select required="required" 
						placeholder="Search Employee" class="form-control " 
						multiple="multiple" id="teamList">
                            <option>Option1</option>
                            <option>Option2</option>
                    </select>
					</div>
					<div class="form-group row">
						<label class="col-sm-4 col-xs-4 col-form-label">Applicant Remarks</label><span class="dividerClass">:</span>
						<textarea class="col-sm-8 col-xs-8 form-control"
						 id="applicantRemarks" type="text" ng-model="projectMaster.applicantRemark"
						 autocomplete="off"></textarea> 
					</div>
					<div class="form-group row">
						<label class="col-sm-4 col-xs-4 col-form-label">Approver Remarks</label><span class="dividerClass">:</span>
						<textarea class="col-sm-8 col-xs-8 form-control"
						 id="approverRemarks" type="text" ng-model="projectMaster.approverRemarks"
						 autocomplete="off"></textarea> 
					</div>
                    <div class="form-group row">
						<font color="red" style="font-size: 12px"><i 
							class="fa fa-long-arrow-left"></i> Please Select Office</font>
                    </div>
                </div>
            </div>
           <input type="hidden" id="sendMsg"
									value="Do you want to send for approval ?"> <input
									type="hidden" id="saveMsg" value="Do you want to save?">
								<input type="hidden" id="sendMsgApprove"
									value="Do you want to Approve ?">
									<input type="hidden" id="sendMsgReject"
									value="Do you want to Rejected ?"> <input type="hidden"
									name="projectConfigurationId"id="projectConfigId" value="${projectConfigId" /> <input
									type="hidden" name="mailType" value="${mailType" /> <input
									type="hidden" name="companyId" id="companyId"
									value="${userCompany.companyId"> <input
									type="hidden" id="createdId" name="createdId"
									value="createdId" /> <input type="hidden"
									id="createdDate" name="createdDate" value="createdDate" />
								<input type="text" name="projectManagerId"
									id="projectManagerId" value="projectManagerId" /> <input
									type="text" name="accountmanagerId" id="accountmanagerId"
									value="accountmanagerId" /> <input type="hidden"
									name="projectManagerName" id="projectManagerName"
									value="projectManagerName" /> <input type="hidden"
									name="accountmanagerName" id="accountmanagerName"
									value="accountmanagerName" />
									<input type="hidden" id="detailFlag"
									value="detailFlag">
									<input type="hidden" value="${navigation" id="navigation" name="navigation"> 	
									<input type="hidden" value="${fromSelfGrid" id="fromSelfGrid" name="fromSelfGrid"> 	
									<input type="hidden" value="${AllButtonHide" id="AllButtonHide" name="AllButtonHide"> 
									 <input type="hidden" value="teamEmpIdsList" id="teamEmpIdsList" name="teamEmpIdsList"> 
									 <input type="hidden" value="team" id="team" name="team">   
									 <input type="hidden" name="delete" id="deleteMsg" value="Do you want to delete?">
        </div>
<script>
	$(document).ready(
	function() {
	$(function() {
	$("#projectManager").autocomplete({
	minLength : 3,
	selectfirst : true,
	minChars : 1,
	matchSubset : 1,
	matchContains : 1,
	cacheLength : 10,
	autoFill : false,
	search : function(e, u) {
	console.log("fetched project manager list")
},
source : function(request,response) {
		
	$.ajax({
		url : baseURL + '/common/searchByNameAndCodeForEisCompany.spr',
		type : "POST",
		data : {
		name : $('#projectManager').val(),
		companyId : $('#companyId').val(),
		},
		dataType : "json",
		success : function(
		data) {
		if (!data.length) {
		var result = [ {
		label : "No matches found",
		value : ''
		} ];
		response(result);
		} else {
		response(jQuery
		.map(data,function(item) {
			return {
		label : (item.name).split("@@")[1],
		value : (item.name).split("@@")[1],
		comId : (item.name).split("@@")[0],
	};
	
	}));
	}
	}
															});
												},
												select : function(event, ui) {
													var val = "";
													var lable = "";
													var comId = "";
													var hCatId = "";
													this.value = ui.item.label;
													
													alert(ui.item.comId)//empid
													
													$("#projectManagerid")
																.val(ui.item.comId);
													return true;
												}
											});
						});
					});

	$(document)
			.ready(
					function() {
						$(function() {
							$("#accountmanager")
									.autocomplete(
											{
												minLength : 3,
												selectfirst : true,
												minChars : 1,
												matchSubset : 1,
												matchContains : 1,
												cacheLength : 10,
												autoFill : true,
												search : function(e, u) {
													console.log(1)

												},
												source : function(request,
														response) {
													$
															.ajax({
																url : baseURL + '/common/searchByNameAndCodeForEisCompany.spr',
																type : "POST",
																data : {
																	name : $(
																			'#accountmanager')
																			.val(),
																	companyId : $(
																			'#companyId')
																			.val(),

																},
																dataType : "json",
																success : function(
																		data) {
																	if (!data.length) {
																		var result = [ {
																			label : "No matches found",
																			value : ''
																		} ];
																		response(result);
																	} else {
																		response(jQuery
																				.map(
																						data,
																						function(
																								item) {
																							return {
																								label : (item.name)
																										.split("@@")[1],
																								value : (item.name)
																										.split("@@")[0],
																								comId : (item.name)
																										.split("@@")[2],

																							};
																						}));
																	}
																}
															});
												},
												select : function(event, ui) {
													var val = "";
													var lable = "";
													var comId = "";
													var hCatId = "";
													this.value = ui.item.label;
													
													
													alert(ui.item.value)//empid
													document.getElementById('fromDate').value= ui.item.value;
													$("#accountmanagerId")
																.val(val);
													return false;
													if (ui.item != null
															&& trim(ui.item.value) != "") {
														val = ui.item.value;
														label = ui.item.label;
														comId = ui.item.comId;
														
													}
													if (val != "") {
														$('#accountmanager')
																.html(label);
														$("#accountmanagerId")
																.val(val);
														$("#companyId1").val(
																comId);
														$("#tab1Btn").show();
													}

													// update what is displayed in the textbox
													this.value = label;
													return false;
												}
											});
						});
					});

	//   comma separated  autocomplete start
	$(document)
			.ready(
					function() {
						function split(val) {
							return val.split(/,\s*/);
						}
						function extractLast(term) {
							return split(term).pop();
						}
						$(function() {
							$("#keyContactPersonID")
									.autocomplete(
											{
												minLength : 3,
												selectfirst : true,
												minChars : 1,
												matchSubset : 1,
												matchContains : 1,
												cacheLength : 10,
												autoFill : true,
												search : function(e, u) {
													console.log(1)

												},
												source : function(request,
														response) {
													$
															.ajax({
																url : baseURL +'/common/searchByNameAndCodeForEisCompany.spr',
																type : "POST",
																data : {
																	name : extractLast(request.term),
																	companyId : $(
																			'#companyId')
																			.val(),

																},
																dataType : "json",
																success : function(
																		data) {
																	if (!data.length) {
																		var result = [ {
																			label : "No matches found",
																			value : ''
																		} ];
																		response(result);
																	} else {
																		response(jQuery
																				.map(
																						data,
																						function(
																								item) {
																							return {
																								label : (item.name)
																										.split("@@")[1],
																								value : (item.name)
																										.split("@@")[2],
																								empId : (item.name)
																										.split("@@")[0],
																							};
																						}));
																	}
																}
															});
												},
												focus : function() {

													return false;
												},
												select : function(event, ui) {
													var val = "";
													var lable = "";
													var empId = "";
													var hCatId = "";
													var terms = split(this.value);
													// remove the current input
													terms.pop();
													if (ui.item != null
															&& trim(ui.item.value) != "") {
														val = ui.item.value;
														label = ui.item.label;
														empId = ui.item.empid;

													}
													if (val != "") {
													this.value = ui.item.label;
													document.getElementById('fromDate').value= ui.item.label;
														$('#keyContactPersonID')
																.html(label);
														// add the selected item  ,terms will not contain any duplicates
														if($.inArray(val, terms ) === -1) 
														terms.push(val);
													}

													// update what is displayed in the textbox
													alert(ui.item.label)
													alert(ui.item.empid)
													alert(ui.item.value)
													this.value = label;
													terms.push("");
													this.value = terms
															.join(", ");
													return false;
												}
											});
						});
					});
	
					</script>		
    </ion-content>
</ion-view>